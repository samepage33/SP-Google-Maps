/**
 * @package     SP Google Maps
 * @author      Kudratullah
 * @version     1.1.2
 * @since       SP Google Maps 1.0
 * @copyright   2017 SamePage Inc.
 * @license     GPL-2.0+ 
 */
!function(e){"use strict";function a(e){switch(e.code){case e.TIMEOUT:alert(mapdata.messages.geo_timeout);break;case e.POSITION_UNAVAILABLE:alert(mapdata.messages.geo_position_unavailable);break;case e.PERMISSION_DENIED:alert(mapdata.messages.geo_permission_denied);break;case e.UNKNOWN_ERROR:alert(mapdata.messages.geo_unknown_error)}}function t(){var a=new google.maps.LatLng(i,m);n=new google.maps.DirectionsRenderer;var t={center:a,scrollwheel:l,styles:r,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,streetViewControl:!1,zoom:Number(mapdata.maps_zoom)},o=new google.maps.Map(document.getElementById("map_canvas_"+mapdata.mapid),t);n.setMap(o),n.setPanel(document.getElementById("directionsPanel"));var s=new google.maps.Marker({position:a,map:o,icon:mapdata.icon,animation:google.maps.Animation.DROP,title:mapdata.title});if(""!=mapdata.description){var d=new google.maps.InfoWindow({content:mapdata.description});google.maps.event.addListener(s,"click",function(){d.open(o,s)})}google.maps.event.addListener(o,"bounds_changed",function(){0==l&&(e(o.getDiv()).children().eq(0).height()==window.innerHeight&&e(o.getDiv()).children().eq(0).width()==window.innerWidth?o.setOptions({scrollwheel:!0}):o.setOptions({scrollwheel:!1}))})}function o(){var e={position:new google.maps.LatLng(g,p),scrollwheel:l,pov:{heading:Number(mapdata.heading),pitch:Number(mapdata.pitch)},zoom:Number(mapdata.sv_zoom)};new google.maps.StreetViewPanorama(document.getElementById("pano_"+mapdata.mapid),e)}var n,s=new google.maps.DirectionsService,d={enableHighAccuracy:!0,timeout:6e4,maximumAge:0},r=void 0!==mapdata.style?JSON.parse(mapdata.style):"",i=Number(mapdata.lat),m=Number(mapdata.lng),l=JSON.parse(mapdata.mwscroll),g=Number(mapdata.sv_lat),p=Number(mapdata.sv_lng),c="https://www.google.com/maps?hl=en&ie=UTF8&f=d&dirflg=r&saddr="+encodeURI(mapdata.messages.client_location_request)+"&daddr="+i+","+m,u="https://www.google.com/maps?hl=en&ie=UTF8&f=d&dirflg=w&saddr="+encodeURI(mapdata.messages.client_location_request)+"&daddr="+i+","+m,_="https://www.google.com/maps?hl=en&ie=UTF8&f=d&dirflg=d&saddr="+encodeURI(mapdata.messages.client_location_request)+"&daddr="+i+","+m;e(document).ready(function(){e(".travelMode").click(function(t){var o=e(this).attr("data-travelMode");navigator.geolocation?(navigator.geolocation.getCurrentPosition(function(e){var a=e.coords.latitude,t=e.coords.longitude,d={origin:new google.maps.LatLng(a,t),destination:new google.maps.LatLng(i,m),travelMode:google.maps.TravelMode[o],drivingOptions:{departureTime:new Date(Date.now()),trafficModel:"optimistic"}};s.route(d,function(e,a){"ZERO_RESULTS"==a?alert(mapdata.messages.g_zero_results):"UNKNOWN_ERROR"==a?alert(mapdata.messages.geo_unknown_error):"REQUEST_DENIED"==a?alert(mapdata.messages.g_request_denied):"OVER_QUERY_LIMIT"==a?alert(mapdata.messages.g_over_query_limit):"NOT_FOUND"==a?alert(mapdata.messages.g_not_found):"INVALID_REQUEST"==a?alert(mapdata.messages.g_invalid_request):a==google.maps.DirectionsStatus.OK?n.setDirections(e):alert(mapdata.messages.g_no_status_found+" "+a)})},a,d),t.preventDefault()):(alert(mapdata.messages.geo_not_supported),e('*[data-travelMode="DRIVING"]').attr("href",_),e('*[data-travelMode="WALKING"]').attr("href",u),e('*[data-travelMode="TRANSIT"]').attr("href",c))})}),google.maps.event.addDomListener(window,"load",t),google.maps.event.addDomListener(window,"load",o)}(jQuery);